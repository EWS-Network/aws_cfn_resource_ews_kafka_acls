{
    "typeName": "EWS::Kafka::ACL",
    "description": "Resource to create Kafka topics in your cluster.",
    "sourceUrl": "https://github.com/ews-network/cfn-kafka-topic-resource-provider",
    "definitions": {
        "Policy": {
            "type": "object",
            "additionalProperties": false,
            "required": [
                "Resource",
                "Principal",
                "ResourceType",
                "Access",
                "Effect"
            ],
            "properties": {
                "Resource": {
                    "type": "string",
                    "pattern": "^[a-zA-Z0-9_.-]+$",
                    "description": "Name of the resource to apply the ACL for",
                    "$comment": "LITERAL or PREFIX value for the resource"
                },
                "PatternType": {
                    "type": "string",
                    "pattern": "^[A-Z]+$",
                    "description": "Pattern type",
                    "$comment": "LITERAL or PREFIX",
                    "enum": [
                        "LITERAL",
                        "PREFIX",
                        "MATCH"
                    ],
                    "default": "LITERAL"
                },
                "Principal": {
                    "type": "string",
                    "description": "Kafka user to apply the ACLs for.",
                    "$comment": "When using Confluent Kafka cloud, use the service account ID"
                },
                "ResourceType": {
                    "type": "string",
                    "description": "Kafka user to apply the ACLs for.",
                    "enum": [
                        "CLUSTER",
                        "DELEGATION_TOKEN",
                        "GROUP",
                        "TOPIC",
                        "TRANSACTIONAL_ID"
                    ]
                },
                "Action": {
                    "type": "string",
                    "description": "Access action allowed.",
                    "enum": [
                        "ALL",
                        "READ",
                        "WRITE",
                        "CREATE",
                        "DELETE",
                        "ALTER",
                        "DESCRIBE",
                        "CLUSTER_ACTION",
                        "DESCRIBE_CONFIGS",
                        "ALTER_CONFIGS",
                        "IDEMPOTENT_WRITE"
                    ]
                },
                "Effect": {
                    "type": "string",
                    "description": "Effect for the ACL.",
                    "$comment": "Whether you allow or deny the access",
                    "enum": [
                        "DENY",
                        "ALLOW"
                    ]
                },
                "Host": {
                    "type": "string",
                    "description": "Specify the host for the ACL. Defaults to '*'",
                    "default": "*"
                }
            }
        }
    },
    "properties": {
        "Policies": {
            "type": "array",
            "insertionOrder": false,
            "uniqueItems": false,
            "items": {
                "$ref": "#/definitions/Policy"
            }
        },
        "Id": {
            "type": "string",
            "description": "Unique ID registered for this ACL",
            "$comment": "Generated by the system"
        },
        "BootstrapServers": {
            "type": "string",
            "minLength": 3,
            "description": "Endpoint URL of the Kafka cluster in the format hostname:port"
        },
        "SecurityProtocol": {
            "type": "string",
            "default": "PLAINTEXT",
            "description": "Kafka Security Protocol.",
            "enum": [
                "PLAINTEXT",
                "SSL",
                "SASL_PLAINTEXT",
                "SASL_SSL"
            ]
        },
        "SASLMechanism": {
            "type": "string",
            "default": "PLAIN",
            "description": "Kafka SASL mechanism for Authentication",
            "enum": [
                "PLAIN",
                "GSSAPI",
                "OAUTHBEARER",
                "SCRAM-SHA-256",
                "SCRAM-SHA-512"
            ]
        },
        "SASLUsername": {
            "type": "string",
            "default": "",
            "description": "Kafka SASL username for Authentication"
        },
        "SASLPassword": {
            "type": "string",
            "default": "",
            "description": "Kafka SASL password for Authentication"
        }
    },
    "additionalProperties": false,
    "required": [
        "Policies",
        "BootstrapServers"
    ],
    "createOnlyProperties": [
        "/properties/Name",
        "/properties/BootstrapServers"
    ],
    "writeOnlyProperties": [
        "/properties/SASLPassword"
    ],
    "primaryIdentifier": [
        "/properties/Name"
    ],
    "readOnlyProperties": [
        "/properties/Id"
    ],
    "additionalIdentifiers": [
        [
            "/properties/Id"
        ]
    ],
    "handlers": {
        "create": {
            "permissions": [
                "secretsmanager:GetSecretValue"
            ]
        },
        "read": {
            "permissions": [
                "secretsmanager:GetSecretValue"
            ]
        },
        "update": {
            "permissions": [
                "secretsmanager:GetSecretValue"
            ]
        },
        "delete": {
            "permissions": [
                "secretsmanager:GetSecretValue"
            ]
        },
        "list": {
            "permissions": [
                "secretsmanager:GetSecretValue"
            ]
        }
    }
}
